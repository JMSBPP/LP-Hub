"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const expect_1 = require("./expect");
async function snapshotGasCost(x) {
    const resolved = await x;
    if (typeof resolved === 'bigint') {
        (0, expect_1.expect)(Number(resolved)).toMatchSnapshot();
    }
    else if ('deploymentTransaction' in resolved) {
        const receipt = await resolved.deploymentTransaction()?.wait();
        if (receipt) {
            (0, expect_1.expect)(Number(receipt.gasUsed)).toMatchSnapshot();
        }
        else {
            console.warn('⚠️Deployment transaction returned null. Skipping gas usage snapshot.\n', new Error().stack);
        }
    }
    else if ('wait' in resolved) {
        const waited = await resolved.wait();
        if (waited) {
            (0, expect_1.expect)(Number(waited.gasUsed)).toMatchSnapshot();
        }
        else {
            console.warn('⚠️Transaction returned null. Skipping gas usage snapshot.\n', new Error().stack);
        }
    }
}
exports.default = snapshotGasCost;
